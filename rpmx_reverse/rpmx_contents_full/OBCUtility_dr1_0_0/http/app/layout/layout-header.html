<header class="page-header" role="banner">
  <h3>{{ layout.title }}</h3>
</header>

<nav class="navbar navbar-inverse" role="navigation" ng-controller="navCtrl as vm">
  <div class="container">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="#"><img alt="AMX" src="content/images/amx-logo.png"></a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        <li ng-class="{active: vm.isActive('/')}"><a href="#/">Home</a></li>
        <li class="dropdown" ng-class="{active: vm.isInPath('settings')}" ng-show="vm.hasNavChildren('settings')">
          <a class="dropdown-toggle" data-toggle="dropdown">Settings <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li ng-show="vm.hasNavItems('settings/room' )" ng-class="{active: vm.isInPath('settings/room' )}"><a href="#/settings/room" >Room</a></li>
            <li ng-show="vm.hasNavItems('settings/panel')" ng-class="{active: vm.isInPath('settings/panel')}"><a href="#/settings/panel">Panel</a></li>
            <li ng-show="vm.hasNavItems('settings/help' )" ng-class="{active: vm.isInPath('settings/help' )}"><a href="#/settings/help" >Help</a></li>
            <li ng-show="vm.hasNavItems('settings/delay')" ng-class="{active: vm.isInPath('settings/delay')}"><a href="#/settings/delay">Delay</a></li>
            <li ng-show="vm.hasNavItems('settings/ir'   )" ng-class="{active: vm.isInPath('settings/ir'   )}"><a href="#/settings/ir"   >IR</a></li>
          </ul>
        </li>
        <li class="dropdown" ng-class="{active: vm.isInPath('environment')}" ng-show="vm.hasNavChildren('environment')">
          <a class="dropdown-toggle" data-toggle="dropdown">Environment <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li ng-show="vm.hasNavItems('environment/screen'  )" ng-class="{active: vm.isInPath('environment/screen'  )}"><a href="#/environment/screen"  >Screens</a></li>
            <li ng-show="vm.hasNavItems('environment/lift'    )" ng-class="{active: vm.isInPath('environment/lift'    )}"><a href="#/environment/lift"    >Lifts</a></li>
            <li ng-show="vm.hasNavItems('environment/shade'   )" ng-class="{active: vm.isInPath('environment/shade'   )}"><a href="#/environment/shade"   >Shades</a></li>
            <li ng-show="vm.hasNavItems('environment/lighting')" ng-class="{active: vm.isInPath('environment/lighting')}"><a href="#/environment/lighting">Lighting</a></li>
          </ul>
        </li>
        <li class="dropdown" ng-class="{active: vm.isInPath('devices')}" ng-show="vm.hasNavChildren('devices')">
          <a class="dropdown-toggle" data-toggle="dropdown">Devices <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li ng-show="vm.hasNavItems('devices/backend'    )" ng-class="{active: vm.isInPath('devices/backend'    )}"><a href="#/devices/backend"    >Backend</a></li>
            <li ng-show="vm.hasNavItems('devices/source'     )" ng-class="{active: vm.isInPath('devices/source'     )}"><a href="#/devices/source"     >Sources</a></li>
            <li ng-show="vm.hasNavItems('devices/destination')" ng-class="{active: vm.isInPath('devices/destination')}"><a href="#/devices/destination">Destinations</a></li>
          </ul>
        </li>
        <li ng-class="{active: vm.isInPath('diagnostics')}" ng-show="false">
          <a href="#/diagnostics">Diagnostics</a>
        </li>
        <li class="dropdown" ng-class="{active: vm.isInPath('lists')}" ng-show="vm.hasNavChildren('lists')">
          <a class="dropdown-toggle" data-toggle="dropdown">Lists <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li ng-show="vm.hasNavItems('lists/atc') || vm.hasNavItems('lists/vtc')" class="nav-header"><em>Speed Dial</em></li>
            <li ng-show="vm.hasNavItems('lists/atc')" ng-class="{active: vm.isInPath('lists/atc')}"><a href="#/lists/atc">Telephone</a></li>
            <li ng-show="vm.hasNavItems('lists/vtc')" ng-class="{active: vm.isInPath('lists/vtc')}"><a href="#/lists/vtc">Video</a></li>
            <li ng-show="vm.hasNavItems('lists/tnr') || vm.hasNavItems('lists/dvr')" class="nav-header"><em>Channel Favorites</em></li>
            <li ng-show="vm.hasNavItems('lists/tnr')" ng-class="{active: vm.isInPath('lists/tnr')}"><a href="#/lists/tnr">TNR</a></li>
            <li ng-show="vm.hasNavItems('lists/dvr')" ng-class="{active: vm.isInPath('lists/dvr')}"><a href="#/lists/dvr">DVR</a></li>
          </ul>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container -->
</nav>
